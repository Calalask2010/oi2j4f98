# Развертывание на Railway.com

## Подготовка проекта

Ваш проект HireHand Platform готов для развертывания на Railway.com. Созданы все необходимые файлы конфигурации:

### Файлы конфигурации для Railway:
- `railway.json` - основная конфигурация Railway
- `railway.toml` - расширенная конфигурация с переменными окружения
- `nixpacks.toml` - конфигурация сборки (поддержка Node.js + Python)
- `Procfile` - альтернативные команды запуска
- `.env.example` - шаблон переменных окружения
- `requirements.txt` - зависимости Python

## Пошаговая инструкция развертывания

### 1. Создание аккаунта и подключение GitHub
1. Зайдите на [railway.app](https://railway.app)
2. Зарегистрируйтесь через GitHub
3. Подключите ваш репозиторий с кодом

### 2. Создание проекта
1. Нажмите "New Project"
2. Выберите "Deploy from GitHub repo"
3. Выберите ваш репозиторий с кодом HireHand

### 3. Настройка базы данных
1. В проекте нажмите "+ New Service"
2. Выберите "PostgreSQL"
3. Railway автоматически создаст базу данных

### 4. Настройка переменных окружения
Перейдите в Settings → Variables и добавьте переменные:

**Обязательные переменные:**
```
NODE_ENV=production
PORT=5000
SECRET_KEY=your-secure-secret-key-here
DEBUG=false
```

**Переменные базы данных (автоматически заполняются Railway):**
```
DATABASE_URL=${{Postgres.DATABASE_URL}}
PGHOST=${{Postgres.PGHOST}}
PGDATABASE=${{Postgres.PGDATABASE}}
PGUSER=${{Postgres.PGUSER}}
PGPASSWORD=${{Postgres.PGPASSWORD}}
PGPORT=${{Postgres.PGPORT}}
```

### 5. Настройка домена
1. Перейдите в Settings → Domains
2. Railway автоматически предоставит домен вида `your-app.railway.app`
3. При необходимости можете добавить кастомный домен

### 6. Развертывание
1. Railway автоматически начнет сборку при коммите в main/master ветку
2. Проверьте логи сборки в разделе "Deploy"
3. После успешной сборки приложение будет доступно по предоставленному URL

## Особенности конфигурации

### Гибридная архитектура
Проект поддерживает два способа запуска:
- **Node.js Backend (основной)**: Express.js с TypeScript, запускается через `npm run start`
- **Python Backend (альтернативный)**: Flask с Python, запускается через `python3 main.py`

### Автоматическая сборка
- Nixpacks автоматически устанавливает Node.js 20 и Python 3.11
- Устанавливает все зависимости из package.json и requirements.txt
- Собирает фронтенд через Vite
- Настраивает переменные окружения

### Health Check
Добавлен endpoint `/api/health` для мониторинга состояния приложения Railway.

## Мониторинг и логи

### Просмотр логов
1. Перейдите в раздел "Observability"
2. Выберите "Logs" для просмотра логов приложения
3. Используйте фильтры для поиска ошибок

### Метрики
Railway предоставляет метрики использования CPU, памяти и сети в разделе "Metrics".

## Обновление приложения

### Автоматическое развертывание
1. Сделайте коммит изменений в ваш репозиторий
2. Отправьте изменения в main/master ветку
3. Railway автоматически пересоберет и развернет приложение

### Ручное развертывание
1. Перейдите в "Deployments"
2. Нажмите "Redeploy"

## Решение проблем

### Проблемы с базой данных
1. Проверьте переменные окружения в Settings → Variables
2. Убедитесь, что DATABASE_URL корректно ссылается на PostgreSQL сервис
3. Проверьте логи на предмет ошибок подключения

### Проблемы со сборкой
1. Проверьте логи сборки в разделе Deploy
2. Убедитесь, что все зависимости указаны в package.json
3. Проверьте настройки в nixpacks.toml

### Проблемы с запуском
1. Проверьте команду запуска в railway.json
2. Убедитесь, что PORT правильно настроен
3. Проверьте health check endpoint

## Полезные ссылки

- [Документация Railway](https://docs.railway.app/)
- [Nixpacks документация](https://nixpacks.com/)
- [PostgreSQL на Railway](https://docs.railway.app/databases/postgresql)